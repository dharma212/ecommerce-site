{% extends "base.html" %} 
{% block content %}

<div class="auth-page">
  <form method="POST" class="auth-form" novalidate>
    <h2 class="auth-title">Login</h2>

    {% csrf_token %} 
    
    {% if form.non_field_errors %}
    <div class="alert alert-warning">
      {% for error in form.non_field_errors %}
        <div>
            {{ error }} 
            {% if "not registered" in error.lower %}
                <a href="{% url 'signup' %}" class="fw-bold text-primary">Sign Up here</a>
            {% endif %}
        </div>
      {% endfor %}
    </div>
    {% endif %}

    <div class="form-group">
      <label for="{{ form.username.id_for_label }}">Username</label>
      {{ form.username }} 
      {% if form.username.errors %}
      <div class="text-danger small">
        {% for error in form.username.errors %}
          <div>{{ error }}</div>
        {% endfor %}
      </div>
      {% endif %}
    </div>

    <div class="form-group">
      <label for="{{ form.password.id_for_label }}">Password</label>
      {{ form.password }} 
      {% if form.password.errors %}
      <div class="text-danger small">
        {% for error in form.password.errors %}
          <div>{{ error }}</div>
        {% endfor %}
      </div>
      {% endif %}
      <div class="terms-container" style="display: flex !important; flex-direction: row !important; align-items: center !important; gap: 10px !important; margin-top: 15px !important; width: 100% !important;">
    
    <div style="display: inline-block !important; width: auto !important;">
        {{ form.terms_accepted }}
    </div>

    <label for="{{ form.terms_accepted.id_for_label }}" style="margin: 0 !important; display: inline !important; font-size: 13px !important; white-space: nowrap !important; cursor: pointer !important; width: auto !important;">
        I agree to the 
        <a href="{% url 'terms_public' %}" target="_blank" style="display: inline !important; color: #0d6efd !important; text-decoration: underline !important;">Terms & Conditions</a>
    </label>
</div>

{% if form.terms_accepted.errors %}
    <div class="text-danger" style="font-size: 11px; margin-top: 5px;">
        {% for error in form.terms_accepted.errors %}{{ error }}{% endfor %}
    </div>
{% endif %}
    </div>

    <div class="form-group d-flex justify-content-between mt-2">
      <a href="{% url 'forgot_password' %}" class="auth-link">Forgot Password?</a>
      <a href="{% url 'signup' %}" class="auth-link text-primary">New User? Register</a>
    </div>

    <button type="submit" class="auth-btn mt-3">Login</button>
  </form>
</div>

{% endblock %}